services:
    qbittorrent:
        image: lscr.io/linuxserver/qbittorrent:latest
        container_name: qbittorrent
        environment:
          - PUID=1000
          - PGID=1000
          - TZ=Europe/London
          - UMASK_SET=022
          - WEBUI_PORT=8082
        volumes:
          - D:/mediaserver/qbittorrentdata/config/:/config
          - D:/mediaserver/qbittorentdata/downloads:/downloads
        ports:
          - 6881:6881
          - 6881:6881/udp
          - 8082:8082
        restart: unless-stopped

    radarr:
        image: lscr.io/linuxserver/radarr
        container_name: radarr
        environment:
            - PUID=1000
            - PGID=1000
            - TZ=Europe/London
        volumes:
            - D:/mediaserver//radarr/:/config            
            - D:/movies/:/movies
            - D:/mediaserver/qbittorentdata/downloads:/downloads         
        ports:
            - 7878:7878
        restart: unless-stopped
        depends_on: 
            - qbittorrent    
    
    embyserver:
        image: lscr.io/linuxserver/emby:latest
        container_name: embyserver
        environment:
            - PUID=1000
            - PGID=1000
            - TZ=Europe/London
        volumes:
            - D:/mediaserver/embyserver/config:/config
            - D:/mediaserver/embyserver/transcode:/transcode
            - D:/movies:/media/movies
            - D:/music:/media/music
            - D:/tv:/media/tv
        ports:
            - 8096:8096
        restart: unless-stopped
        depends_on: 
            - qbittorrent                 
    
    prowlarr:
        image: lscr.io/linuxserver/prowlarr
        container_name: prowlarr
        environment:
            - PUID=1000
            - PGID=1000
            - TZ=Europe/London
        volumes:
            - D:/mediaserver/prowlarr/config:/config
            - D:/mediaserver/prowlarr/downloads:/downloads
            - D:/mediaserver/prowlarr/tv:/tv
        ports:
            - 9696:9696
        restart: unless-stopped
        depends_on: 
            - qbittorrent         
    
    sonarr:
        image: lscr.io/linuxserver/sonarr
        container_name: sonarr
        environment:
            - PUID=1000
            - PGID=1000
            - TZ=Europe/London
        volumes:
            - D:/mediaserver/sonarr/config:/config
            - D:/mediaserver/downloads:/downloads
            - D:/tv:/tv
            - D:/mediaserver/qbittorentdata/downloads:/downloads
        ports:
            - 8989:8989
        restart: unless-stopped
        depends_on: 
            - qbittorrent

    tunnel:
        image: cloudflare/cloudflared:latest
        restart: unless-stopped
        environment:
            - TUNNEL_URL=http://embyserver:8096
            - TUNNEL_TOKEN=eyJhIjoiODE4YTkyNDk1ZDZmNDdlMmY1M2U3ZGJjMDRlYjg5YjgiLCJ0IjoiMjZiZDc5MGEtZjAzZC00NzEyLThlODUtMDA1OGUyZTdkYTEzIiwicyI6Ik4yTmhZMlEyWmpJdE5qUXdOUzAwTUdFeUxUbGtNelV0WXpVMk5EWTBaV1V4Tm1FeSJ9
        command: tunnel run
        depends_on:
        - embyserver

    jackett:
        image: lscr.io/linuxserver/jackett:latest
        container_name: jackett
        environment:
        - PUID=1000
        - PGID=1000
        - TZ=Etc/UTC`
        volumes:
        - D:/mediaserver/jackett/data:/config
        - D:/mediaserver/downloads:/downloads
        ports:
        - 9117:9117
        restart: unless-stopped